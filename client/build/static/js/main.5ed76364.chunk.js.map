{"version":3,"sources":["constants/routes.js","components/Home.js","components/Error.js","utils/storage.js","contexts/shopping.js","contexts/user.js","components/Navbar.js","components/products/Filters.js","components/products/Products.js","components/products/ProductDetails.js","components/cart/Cart.js","components/accounts/Login.js","components/accounts/Register.js","components/accounts/History.js","components/accounts/orderDetails.js","components/accounts/ActivateAccount.js","components/accounts/ResetAccount.js","components/accounts/ResetPassword.js","components/admin/products.js","components/admin/amendProducts.js","pages/Pages.js","App.js","index.js"],"names":["PRODUCTS","REGISTER","LOGIN","CREATE_PRODUCT","HISTORY","Home","classNameName","className","onClick","window","open","Error","to","addToStorage","item","localStorage","setItem","JSON","stringify","clearStorage","removeItem","ShoppingContext","createContext","ShoppingProvider","children","useState","products","setProducts","total","setTotal","cart","setCart","categorysGlobal","setCategorysGlobal","categorySelection","setCategorySelection","search","setSearch","Provider","value","addItem","price","_id","title","image","countInStock","obj","count","every","newList","alert","map","reduceQty","id","increaseQty","filter","clearBasket","getTotal","totalSum","reduce","prev","UserContext","UserProvider","user","setUser","accessToken","setAccessToken","isLogged","setIsLogged","isAdmin","setIsAdmin","history","setHistory","useEffect","a","fetch","headers","Authorization","res","json","data","name","role","console","log","message","getUser","Navbar","useContext","logOutUser","ROUTES","style","height","color","width","backgroundColor","forEach","val","cartCount","Filters","category","setCategory","loading","setLoading","error","setError","getCategorys","type","onChange","e","target","placeholder","styledObj","minWidth","Products","newData","msg","getProducts","deleteProduct","method","body","credentials","toLowerCase","includes","src","alt","description","length","ProductDetails","product","setProduct","useParams","x","err","Cart","Login","useHistory","signInErr","setSignInErr","email","setemail","password","setpassword","emailErr","setemailErr","passwordErr","setpasswordErr","handleChange","emailRegEx","RegExp","test","handleSignIn","preventDefault","errors","accesstoken","push","onSubmit","htmlFor","required","autoComplete","Register","signUpErr","setSignUpErr","setname","confPassword","setconfPassword","nameErr","setnameErr","confPasswordErr","setconfPasswordErr","success","setSuccess","handleSignUp","History","getHistory","scope","paymentID","Date","createdAt","toLocaleDateString","OrderDetails","orderDetails","setOrderDetails","address","recipient_name","line1","city","postal_code","country_code","Sent","ActivateAccount","setErr","validate","ResetAccount","ResetPassword","initialState","CreateProduct","handleChangeInput","handleSubmit","rows","AmendProduct","Pages","exact","path","component","App","storage","parse","getItem","refreshToken","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5ed76364.chunk.js","sourcesContent":["export const HOME = '/';\nexport const PRODUCTS = '/products';\nexport const CART = '/cart';\nexport const REGISTER = '/signup';\nexport const LOGIN = '/signin';\nexport const CONTACT = '/contact';\nexport const CREATE_PRODUCT = '/product_create';\nexport const AMEND_PRODUCT = '/product_amend';\nexport const HISTORY = '/history';\nexport const ACTIVATE = '/user/activate';\nexport const RESET = '/reset';\nexport const RESETPASSWORD = '/reset_password';\n\n\n\n\n","import React from 'react'\n\n\nconst Home = () => {\n\n        return (\n\n            \n        <div classNameName=\"container\">\n\n            <div className=\"row\">\n                <div className=\"col-xs-12\">\n\n            <h1 classNameName=\"text-center mt-5 \" >Welcome to my fullstack website</h1>\n\n            <h5 className=\"mt-5\">FrontEnd</h5>\n\n            <ul className=\"list-unstyled\">\n                <li>- React</li>\n                <li>- Bootstrap</li>\n                <li>- Paypal</li>\n                <li>- Login/Register </li>\n                <li>- Admin user - Add / Delete / Amend Products</li>\n                <li>- Activate account by validating email address of user (Nodemailer)</li> \n                <li>- Password Reset (Nodemailer)</li>\n                <li>- Account locked - password incorrect three times in a row</li>\n            </ul>\n\n            <h5 className=\"mt-5\">BackEnd</h5>\n            <ul className=\"list-unstyled\">\n                <li>- NodeJS</li>\n                <li>- Express</li>\n                <li>- MongoDB</li>\n                <li>{`- JWT AccessToken && RefreshToken + HTTP only cookie`}</li>\n               \n            </ul>\n\n            <button className=\"btn btn-primary\" onClick={()=>{\n                window.open(\"https://github.com/davewar/React_shop_Nodemailer\")\n            }}>GitHub Code</button>\n\n            </div>\n           </div>\n            \n        </div>\n       \n       \n    )\n}\n\nexport default Home\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nconst Error = () => {\n  return (\n    <div>\n      <h1>Error Page</h1>\n      <Link to='/'>Back Home</Link>\n    </div>\n  );\n};\n\nexport default Error;\n","\nexport const addToStorage =(item)=>{\n            // console.log(cart);\n    localStorage.setItem(\"basket\", JSON.stringify(item))\n    \n}\n\nexport const getStorage = ()=>{\n\n    const data = JSON.parse(localStorage.getItem(\"basket\"))\n    return data\n}\n\nexport const clearStorage = ()=>{\n\n    localStorage.removeItem(\"basket\")\n    \n}","import React, {createContext,useState} from 'react';\n\nimport { addToStorage, clearStorage} from '../utils/storage'\n\nexport const ShoppingContext = createContext()\n\nconst ShoppingProvider = ({children})=>{\n  \n    const [products, setProducts] = useState([])\n     const [total, setTotal] = useState(0);\n        const [cart,setCart] = useState([])\n            const [categorysGlobal, setCategorysGlobal] = useState([])\n           \n        \n    // Filter component\n      const [categorySelection, setCategorySelection] = useState(\"all\")  // selected category\n      //search input box\n    const [search, setSearch] = useState(\"\")\n\n        //add   \n        // console.log(cart);\n\n        \n\n        const addItem = (addItem)=>{\n            // console.log(item)\n            const {price,_id, title,image,countInStock} = addItem           \n\n            let obj = {_id, title, price,countInStock, image, count:1}\n            // console.log(obj)\n\n            //in basket already?\n            const inBasket = cart.every(item => item._id !==_id)\n            // console.log(inBasket)\n\n            //not in basket -ie false            \n            if(inBasket){\n                const newList = [...cart,obj]\n                // setCart([...cart,obj])\n                setCart(newList)\n                addToStorage(newList) // add to storage\n                alert(\"Item added to cart.\")\n            \n               \n            }            \n            else{\n                //in basket - true\n                 const newList = cart.map(item=>{\n                     \n                    if(item._id === _id){\n                        \n                        return {\n                            ...item,\n                           count: item.count +1\n                        }\n                   \n                    }\n\n                    return item\n                    \n                })\n\n                setCart(newList)\n                addToStorage(newList) // add to storage\n                alert(\"Item added to cart.\")\n               \n               \n            }     \n           \n        }\n\n        //reduce qty \n        const reduceQty = (id)=>{\n              const newList = cart.map(item=>{\n                     \n                    if(item._id === id){\n\n                        // no items below one\n                        if(item.count === 1){\n\n                              return {\n                                    ...item,\n                                count: item.count =1\n                                }\n                               \n                        } else{\n\n                             return {\n                                    ...item,\n                                count: item.count -1\n                                }\n\n\n                        }\n                        \n                       \n                   \n                    }\n\n                    return item\n                    \n                })\n\n                setCart(newList)\n                addToStorage(newList) // add to storage\n            \n        }\n\n        //increase qty\n\n        const increaseQty = (id)=>{\n\n\n             const newList = cart.map(item=>{\n                     \n                    if(item._id === id){\n                        \n                        return {\n                            ...item,\n                           count: item.count +1\n                        }\n                   \n                    }\n\n                    return item\n                    \n                })\n\n                setCart(newList)\n                addToStorage(newList) // add to storage\n        }\n\n\n        //remove\n        const removeItem = (id)=>{\n\n               const newList = cart.filter(item=> item._id !== id)\n\n                setCart(newList)\n                addToStorage(newList) // add to storage\n        }\n\n        //remove\n        const clearBasket = ()=>{\n            setCart([])\n            setTotal(0)\n           \n            clearStorage() // remove storage\n\n        }\n\n        const getTotal = () => {\n        \n            const totalSum = cart.reduce((prev, item) => {\n                return prev + (item.price * item.count);\n            },0)\n            // console.log(totalSum);\n            setTotal(totalSum)\n\n        };\n\n\n    return (\n        <ShoppingContext.Provider value={{\n            products, setProducts,\n            cart, setCart, \n            addItem,reduceQty,increaseQty,removeItem,clearBasket,\n            total,getTotal,\n\n           \n\n            categorySelection, setCategorySelection,\n            search, setSearch,\n\n            categorysGlobal, setCategorysGlobal\n\n        }} >\n\n            {children}\n        </ShoppingContext.Provider>\n    )\n\n};\n\nexport default ShoppingProvider;\n","import React, {createContext,useEffect,useState} from 'react';\n\nexport const UserContext = createContext()\n\nconst UserProvider = ({children})=>{\n\n        const [user, setUser] = useState(\"\")\n        const [accessToken, setAccessToken] = useState(\"\")\n        const [isLogged, setIsLogged] = useState(false)\n        const [isAdmin, setIsAdmin] = useState(false)\n        const [history, setHistory] = useState([])\n\n                \n        // finds out if logged user is admin or customer\n        useEffect(() => {\n             if(accessToken){\n                const getUser = async () =>{\n\n                    try {\n                        \n                    const res = await fetch('/user/infor',{\n                        headers: {Authorization: accessToken}\n                    })\n\n                    const data = await res.json()\n\n                    // console.log(\"GETUSER\",data)\n\n                    setIsLogged(true)\n                    setUser(data.name)\n                    data.role === 1 ? setIsAdmin(true) : setIsAdmin(false)\n\n                  \n\n                } catch (err) {\n                    console.log(\"DW\",err.message)\n                }\n            }\n\n            getUser()\n            \n        }\n\n\n    }, [accessToken])\n\n       \n\n    return (\n        <UserContext.Provider value={{\n           user, setUser,\n           isLogged, setIsLogged,\n           isAdmin, setIsAdmin,\n           accessToken, setAccessToken,\n            history, setHistory\n        }} >\n\n            {children}\n        </UserContext.Provider>\n    )\n\n};\n\nexport default UserProvider;","import React, {useContext} from 'react';\nimport { Link } from 'react-router-dom';\nimport * as ROUTES from '../constants/routes'\nimport {FaShoppingCart} from 'react-icons/fa'\nimport {ShoppingContext} from '../contexts/shopping'\nimport {UserContext} from '../contexts/user'\n\n const Navbar = () => {\n\n        const { cart  } = useContext(ShoppingContext);    //global\n        const { isLogged, isAdmin, setIsLogged,  setIsAdmin,  setAccessToken, setUser, user  } = useContext(UserContext);    //global\n    \n\n         //items in basket\n        const cartCount = ()=>{\n                let count = 0\n                if(!cart){\n                  return count        \n                } \n\n                cart.forEach(item=>{\n                        let val = item.count\n                        count += val\n\n                })\n                return count\n        }\n\n        const logOutUser = async ()=>{\n               \n                //remove cookie\n                await fetch(\"/user/logout\")\n                //remove ls\n                localStorage.removeItem('firstLogin')\n                \n                setIsLogged(false)\n                setIsAdmin(false)\n                setAccessToken(\"\")\n                setUser(\"\")\n        }\n\n    return (\n        <>\n        <div className=\"row\">\n                <div className=\"col-12\">   \n                <h4 className=\"mt-2 d-flex justify-content-center\">{user}</h4>\n                </div >   \n        </div>\n\n        <div className=\"row\">\n\n        <div className=\"col-6\">        \n\n        <nav className=\" navbar-nav navbar-expand-md navbar-light\">\n                \n                <ul className=\"navbar-nav justify-content-between\">\n                        <li className=\"nav-item\"><Link className=\"nav-item nav-link active\" to={ROUTES.HOME}>Home</Link></li>\n                        <li className=\"nav-item\"><Link className=\"nav-item nav-link\" to={ROUTES.PRODUCTS}>Products</Link></li>\n                           {isLogged && <li className=\"nav-item\"><Link className=\"nav-item nav-link\"  to={ROUTES.HISTORY}>Account</Link></li>}\n                         {!isLogged && <li className=\"nav-item\"><Link className=\"nav-item nav-link\" to={ROUTES.LOGIN}>SignIn</Link></li>}\n                        {isLogged && <li className=\"nav-item\"><Link className=\"nav-item nav-link\" onClick={logOutUser} to={ROUTES.HOME}  >SignOut</Link></li>}                        \n                                \n                        {!isLogged && <li className=\"nav-item\"><Link className=\"nav-item nav-link\" to={ROUTES.REGISTER}>Register</Link></li>}\n                        \n                        {isAdmin && isLogged && <li className=\"nav-item \"><Link className=\"nav-item nav-link text-success  \"  to={ROUTES.CREATE_PRODUCT}>AddProduct</Link></li>}\n                       \n                \n                </ul>\n\n\n        </nav>\n\n        </div>\n\n\n                 <div className=\"col-6\"> \n                        \n                             <div className=\"d-flex mr-5 mt-5 justify-content-end\">\n                                     \n                                    <span><Link to=\"/cart\"><FaShoppingCart style={{height: \"2rem\", color:\"black\" , width:\"2rem\"}}/></Link>\n                                        <span className=\" border rounded-circle\" style={{height: \"1rem\",color: \"white\", backgroundColor:\"black\" , width:\"1rem\"}}>{cartCount()}</span>\n\n                                    </span>\n                            </div>\n                </div>\n\n        </div>\n\n        </>\n    )\n}\n\nexport default Navbar","import React, {useContext,useState,useEffect} from 'react'\nimport {ShoppingContext} from '../../contexts/shopping'\n\nconst Filters = () => {\n\n    const { search, setSearch,categorySelection, setCategorySelection, setCategorysGlobal } = useContext(ShoppingContext);    //global\n\n    const [category, setCategory] = useState(null)  //list of category\n      \n\n    const [loading, setLoading] = useState(true)\n    const [error, setError] = useState(false)\n\n    const getCategorys = async () =>{\n\n            try{\n\n                const res = await fetch('/api/category')\n                const data = await res.json() \n                // console.log(data);\n                setCategory(data)\n                setCategorysGlobal(data)\n                setLoading(false)\n\n            }\n\n            catch(err){\n                console.log(err.message);\n                setError(true)\n            }\n\n        }\n\n        useEffect(() => {\n            let isActive= true\n            getCategorys()\n\n            return ()=>{isActive=false}\n        }, [])\n\n    \n        const handleCategory = (e)=>{\n            const val = e.target.value\n                setCategorySelection(val)\n            // console.log(val)\n\n        }\n   \n\n    return (\n            <>\n            {\n                loading && <div>Loading........</div>\n            }\n\n            {\n                error && <div>Error with loading of page. Please refresh page.</div>\n            }\n\n        <div className=\"container ms-1  mb-5\">\n            \n        {\n            category && <>      \n\n                                <div className=\"row\">\n                                        <div className=\"col-8-md  mb-2\"> \n\n                                                <div className=\"form-group\">\n                                                    {/* <label className=\"m-0\">Filter:</label> */}\n                                                    <input type=\"text\" className=\"form-control\" \n                                                    value={search}\n                                                    onChange={(e)=>setSearch(e.target.value)}\n                                                    placeholder=\"Search...\"/>\n                                                </div>\n\n                                        </div> \n                                </div>\n                                <div className=\"row\">\n                                        <div className=\"col-6 mb-2\">\n                                                <span> Filters: </span>\n                                                <select name=\"category\" value={categorySelection} onChange={handleCategory} >\n                                                    <option value=\"all\">All Products</option>\n                                                    {\n                                                        category.map(item => (\n                                                            <option value={item.name} key={item._id}>\n                                                                {item.name}\n                                                            </option>\n                                                        ))\n                                                    }\n                                                </select>\n                                        </div>\n                                </div>\n\n                                \n                        </>\n        }\n\n        </div>\n        </>\n            \n    )\n}\n\nexport default Filters\n","import React, { useState, useEffect, useContext } from 'react';\n\nimport { Link } from 'react-router-dom';\nimport { ShoppingContext } from '../../contexts/shopping';\nimport Filters from './Filters';\nimport { UserContext } from '../../contexts/user';\nimport Msgbox from './Msgbox';\n\nconst Products = () => {\n\tconst { msg, addItem, products, setProducts, search, categorySelection } =\n\t\tuseContext(ShoppingContext); //global\n\n\tconst { isAdmin, accessToken } = useContext(UserContext);\n\n\tconst [loading, setLoading] = useState(true);\n\tconst [error, setError] = useState(false);\n\n\tlet newData;\n\n\tconst getProducts = async () => {\n\t\ttry {\n\t\t\tconst res = await fetch('/api/products');\n\t\t\tconst data = await res.json();\n\t\t\t// console.log(data);\n\n\t\t\tsetProducts(data);\n\t\t\tsetLoading(false);\n\t\t} catch (err) {\n\t\t\tconsole.log(err.message);\n\t\t\tsetError(true);\n\t\t}\n\t};\n\n\tconst deleteProduct = async (id) => {\n\t\ttry {\n\t\t\tconst res = await fetch('/api/products/' + id, {\n\t\t\t\tmethod: 'DELETE',\n\t\t\t\tbody: JSON.stringify({ id }),\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\tAuthorization: accessToken,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst data = await res.json();\n\n\t\t\t// console.log(data);\n\n\t\t\tif (data !== 'item deleted') {\n\t\t\t\talert('Admin access lasts 10 mins, please refresh page and try again.');\n\t\t\t} else {\n\t\t\t\talert(data);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.log(err.message);\n\t\t\tsetError(true);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tlet isActive = true;\n\n\t\tgetProducts();\n\t\treturn () => {\n\t\t\tisActive = false;\n\t\t};\n\t}, []);\n\n\tif (categorySelection === 'all') {\n\t\tnewData = products;\n\t} else {\n\t\tnewData = products.filter(\n\t\t\t(item) => item.category.toLowerCase() === categorySelection.toLowerCase()\n\t\t);\n\t}\n\n\t//search box\n\tnewData = newData.filter((item) =>\n\t\titem.title.toLowerCase().includes(search.toLowerCase())\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{loading && <div>Loading........</div>}\n\n\t\t\t{error && <div>Error with loading of page. Please refresh page.</div>}\n\n\t\t\t<Filters />\n\n\t\t\t<div className='d-flex flex-row flex-wrap'>\n\t\t\t\t{newData.map((item) => {\n\t\t\t\t\t//    console.log();\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className='card m-3' key={item._id} style={styledObj}>\n\t\t\t\t\t\t\t<img src={item.image} className='card-img-top' alt='' />\n\n\t\t\t\t\t\t\t<div className='card-body'>\n\t\t\t\t\t\t\t\t<h2 className='card-title'>{item.title}</h2>\n\t\t\t\t\t\t\t\t<p className='card-text'>Category: {item.category}</p>\n\t\t\t\t\t\t\t\t<span>Price: £{item.price}</span>\n\t\t\t\t\t\t\t\t{isAdmin && (\n\t\t\t\t\t\t\t\t\t<p className='card-text'>Stock: {item.countInStock}</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<p className='card-text'>Description: {item.description}</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className='card-body'>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName='btn btn-primary border'\n\t\t\t\t\t\t\t\t\tonClick={() => addItem(item)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tBUY\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button className='btn border'>\n\t\t\t\t\t\t\t\t\t<Link to={`/products/${item._id}`}>VIEW</Link>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{isAdmin && (\n\t\t\t\t\t\t\t\t<div className='card-body'>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName='btn btn-danger border'\n\t\t\t\t\t\t\t\t\t\tonClick={() => deleteProduct(item._id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tDELETE\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button className='btn btn-warning border'>\n\t\t\t\t\t\t\t\t\t\t<Link to={`/product_amend/${item._id}`}>EDIT</Link>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\n\t\t\t{!loading && newData.length === 0 ? <h1>No items found</h1> : null}\n\t\t</>\n\t);\n};\n\nconst styledObj = {\n\twidth: '40%',\n\tminWidth: '500px',\n};\n\nexport default Products;\n","import React, {useState, useEffect, useContext} from 'react'\nimport { Link, useParams } from 'react-router-dom';\nimport * as ROUTES from '../../constants/routes';\n\nimport {ShoppingContext} from '../../contexts/shopping'\n\nconst ProductDetails = () => {\n\n        const { addItem, products } = useContext(ShoppingContext);    //global\n        \n\n        const [product, setProduct] = useState([])\n        const [loading, setLoading] = useState(true)\n        const [error, setError] = useState(false)\n\n        const {id} = useParams()\n        // console.log(id);\n\n        useEffect(() => {\n        let isActive = false\n\n                    try{\n                        const getProduct = () =>{\n                            let item = products.filter(x => x._id === id)\n                            return item\n                        }\n                        \n                        let item = getProduct()\n                        \n                        setProduct(item[0])\n                        setLoading(false)\n                    }\n                    catch(err){\n                        console.log(err.message)\n                        setError(true)\n                    }\n                    \n            return ()=> isActive = true\n\n        }, [])\n       \n\n    const { _id,title, description, price, image} =  product\n\n    return (\n        <>\n            {\n                loading && <div>Loading........</div>\n            }\n\n            {\n                error && <div>Error with loading of page. Please refresh page.</div>\n            }\n\n            {   \n            product ?    (              \n\n                        <div className=\"card\" key={_id}>\n\n                                <img className=\"card-img-top\" src={image} alt={title}/>\n\n                                <div className=\"card-body\">\n                                    <h2 className=\"card-title\">{title}</h2>\n                                    <span>Price: £ {price}</span>\n                                    <p className=\"card-text\">{description}</p>\n                                </div> \n                                \n                                <div className=\"card-body\">\n                                    <button className=\"btn btn-primary border\" onClick={()=> addItem(product)}>BUY</button>\n                                    <button className=\"btn border\" ><Link to={ROUTES.PRODUCTS}>Back to products</Link></button>\n                                </div>\n                        \n                            \n                        </div>\n                       \n            \n                )\n                :\n                <h1>Unable to display item. Please try later</h1>\n        \n            }\n            \n\n\n        </>\n    )\n}\n\nexport default ProductDetails\n","import React, { useContext, useEffect } from 'react';\nimport { ShoppingContext } from '../../contexts/shopping';\nimport { Link, Redirect } from 'react-router-dom';\nimport { FaTrashAlt } from 'react-icons/fa';\n// import  PaypalButton from './Paypal'\nimport { clearStorage } from '../../utils/storage';\n\nimport { UserContext } from '../../contexts/user';\n\nconst Cart = () => {\n\tconst {\n\t\tcart,\n\t\tsetCart,\n\t\tincreaseQty,\n\t\treduceQty,\n\t\tremoveItem,\n\t\tclearBasket,\n\t\ttotal,\n\t\tgetTotal,\n\t} = useContext(ShoppingContext); //global\n\tconst { accessToken, isLogged, isAdmin } = useContext(UserContext);\n\n\tuseEffect(() => {\n\t\tlet IsActive = false;\n\t\tgetTotal();\n\n\t\treturn () => (IsActive = true);\n\t}, [cart]);\n\n\tif (!cart || cart.length === 0) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<h1>No Items in basket</h1>\n\t\t\t\t<button className='btn border'>\n\t\t\t\t\t<Link to={`/products`}>CONTINUE SHOPPING</Link>\n\t\t\t\t</button>\n\t\t\t</>\n\t\t);\n\t}\n\n\tconst tranSuccess = async (payment) => {\n\t\t// console.log(payment);\n\t\tconst { paymentID, address } = payment;\n\n\t\tconst res = await fetch('/api/payments', {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify({ cart, paymentID, address }),\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\tcredentials: 'include',\n\t\t\t\tAuthorization: accessToken,\n\t\t\t},\n\t\t});\n\n\t\tconst data = await res.json();\n\t\t// console.log(data);\n\n\t\talert('You have successfully placed an order.');\n\n\t\t// clear cart\n\t\tsetCart([]);\n\t\t//delete local storage\n\t\tclearStorage();\n\t};\n\n\tif (!isLogged) {\n\t\treturn <Redirect to='/signin' />;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<div className='row'>\n\t\t\t\t<div className='col-6 d-flex justify-content-start'>\n\t\t\t\t\t<h1 className='text-center text-uppercase text-secondary '>Cart</h1>\n\t\t\t\t</div>\n\t\t\t\t<div className='col-6 d-flex justify-content-end'>\n\t\t\t\t\t<h3 className='text-center'>Total - £ {total}</h3>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className='row '>\n\t\t\t\t<div className='col-12 d-flex justify-content-start'>\n\t\t\t\t\t<button className='btn btn-secondary' onClick={() => clearBasket()}>\n\t\t\t\t\t\tREMOVE ALL ITEMS\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className='row mb-5'>\n\t\t\t\t<div className='col-12 d-flex justify-content-end'>\n\t\t\t\t\t{/* <PaypalButton\n                                total={total}\n                                tranSuccess={tranSuccess} />  */}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className='container'>\n\t\t\t\t<div className='d-flex flex-row flex-wrap justify-content-between'>\n\t\t\t\t\t{cart\n\t\t\t\t\t\t? cart.map((item) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={item._id}\n\t\t\t\t\t\t\t\t\t\tclassName='card mt-2 mb-4 t h-25'\n\t\t\t\t\t\t\t\t\t\tstyle={styledObj}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img src={item.image} className='card-img-top' alt='' />\n\t\t\t\t\t\t\t\t\t\t{/* <img className=\"\" src={item.image} alt={item.title}/> */}\n\n\t\t\t\t\t\t\t\t\t\t<div className='card-body d-flex justify-content-end '>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn '\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeItem(item._id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<FaTrashAlt\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: '2rem',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'black',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '2rem',\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div className='card-body'>\n\t\t\t\t\t\t\t\t\t\t\t<h1 className='card-title'>{item.title}</h1>\n\n\t\t\t\t\t\t\t\t\t\t\t<p className='card-text'>Price: £{item.price}</p>\n\t\t\t\t\t\t\t\t\t\t\t<h4>Total Price: £{item.price * item.count}</h4>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div className='card-body'>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn primary border mr-2'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => reduceQty(item._id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t-{' '}\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<span className=''>{item.count}</span>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn primary border ml-2'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => increaseQty(item._id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t+{' '}\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<button className='btn border'>\n\t\t\t\t\t\t\t\t\t\t\t<Link to={`/products`}>CONTINUE SHOPPING</Link>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t  })\n\t\t\t\t\t\t: null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nconst styledObj = {\n\twidth: '40%',\n\tminWidth: '450px',\n};\n\nexport default Cart;\n","import React, { useState, useContext } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport {UserContext} from '../../contexts/user'\nimport * as ROUTES from '../../constants/routes'\n\n\nconst Login = () => {\n\n    const {setAccessToken} = useContext(UserContext);    //global user\n      const history = useHistory()\n    \n\n    const [signInErr, setSignInErr] = useState(\"\")\n    const [email, setemail] = useState('');\n    const [password, setpassword] = useState('');\n    const [emailErr, setemailErr] = useState('');\n    const [passwordErr, setpasswordErr] = useState('');\n\n   \n\n    const handleChange = (e, name) => {\n\n        //clear\n      setSignInErr(\"\")\n\n    const user = {};\n    const emailRegEx = RegExp(\n      /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n    );\n    user[name] = e.target.value;\n    // validations\n    switch (name) {\n      case 'email':\n        setemail(user.email);\n        !emailRegEx.test(user.email) ? setemailErr('Invalid Email!') : setemailErr('');\n        break;\n      case 'password':\n        setpassword(user.password);\n        user.password.length < 6 ? setpasswordErr('Password must be at least 6 characters!') : setpasswordErr('');\n        break;\n      default:\n        break;\n    }\n  }\n\n  const handleSignIn = async (e) => {\n    e.preventDefault();\n    if (email && password && !emailErr && !passwordErr) {\n\n          //clear         \n          setSignInErr(\"\")\n      \n\n        \n    try {\n      const res = await fetch('/user/login', { \n        method: 'POST', \n        body: JSON.stringify({ email, password }),\n        headers: {'Content-Type': 'application/json',\n                credentials: 'include'\n                }\n           \n      });\n      const data = await res.json();\n      // console.log(data);\n\n      if (data.errors) {            \n            setSignInErr(data.errors)\n           \n            \n       \n      } else\n      if (data.user) {\n          // console.log(\"HERE1\");\n          localStorage.setItem('firstLogin', true)\n          setAccessToken(data.accesstoken)\n   \n          history.push(\"products\")\n               \n      }\n\n    }\n    catch (err) {\n      console.log(err);\n    }\n\n    }\n  }\n\n  return (\n   \n    <div className=\"container \">\n\n        <div className=\"row mt-5  justify-content-center align-items-center  \" >\n\n          <div className=\"col-xs-12  sign-in\" >\n\n                    <h2 className=\"text-start mt-3\">Sign In</h2>\n                    {signInErr && <div className=\"alert alert-danger text-center\">\n                      <span className=\"text-danger text-capitalize\">{signInErr}</span>\n                    </div>}\n\n                    <form className=\"mt-4 \" onSubmit={handleSignIn}>\n                      <div className=\"form-group\">\n                            <label className=\"mr-3\" htmlFor=\"email\">Enter Email Address</label>\n                            <input\n                              type=\"email\"\n                              name=\"email\"\n                              className={ emailErr ? \"form-control is-invalid\":\n                                    !emailErr && email.length ? \"form-control is-valid\":\"form-control\"\n                                }\n                          \n                              id=\"email\"\n                              placeholder=\"Email Address\"\n                              required\n                              autoComplete=\"on\"\n                              onChange={(e) => handleChange(e, 'email')}\n                            />\n                            {emailErr && <small className=\"text-danger\">{emailErr}</small>}\n                      </div>\n\n                      <div className=\"form-group\">\n                            <label className=\"\" htmlFor=\"password\">Enter Password</label>\n                            <input\n                              type=\"password\"\n                              name=\"password\"\n                              className={ passwordErr ? \"form-control is-invalid\":\n                                    !passwordErr && password.length ? \"form-control is-valid\":\"form-control\"\n                                }\n                            \n                              id=\"password\"\n                              placeholder=\"Password\"\n                              required\n                              autoComplete=\"off\"\n                              onChange={(e) => handleChange(e, 'password')}\n                            />\n                            {passwordErr && <small className=\"text-danger\">{passwordErr}</small>}\n                      </div>\n                      <input type=\"submit\" className=\"btn btn-primary\" value=\"Sign In\" />\n                    </form>\n                    <p className=\"float-left mt-2\">    \n                          Don't yet have an account?<Link to='/signup'>Sign up</Link>\n                    </p>\n                    <div className=\"mt-2 ms-2 \">    \n                          <Link to='/reset'>Forgot Password</Link>\n                    </div>\n\n                </div>    \n\n        </div>\n  \n    </div>\n  )\n}\n\nexport default Login\n","import React, { useState, useContext } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\n// import Cookies from 'js-cookie';\n\nimport {UserContext} from '../../contexts/user'\n\n\n\n\n\n    \n\nconst Register = () => {\n\n  const history = useHistory()\n    \n    const {setAccessToken} = useContext(UserContext);    //global user\n\n    const [signUpErr, setSignUpErr] = useState(\"\")\n\n  const [name, setname] = useState('');\n  const [email, setemail] = useState('');\n  const [password, setpassword] = useState('');\n  const [confPassword, setconfPassword] = useState('');\n  const [nameErr, setnameErr] = useState('');\n  const [emailErr, setemailErr] = useState('');\n  const [passwordErr, setpasswordErr] = useState('');\n  const [confPasswordErr, setconfPasswordErr] = useState('');\n  const [success,setSuccess] = useState('')\n  const handleChange = (e, name) => {\n\n      //clear\n    setSignUpErr(\"\")\n\n    const user = {};\n    const emailRegEx = RegExp(\n      /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n    );\n    user[name] = e.target.value;\n    // validations\n    switch (name) {\n      case 'name':\n       \n        setname(user.name);\n        user.name.length < 3 ? setnameErr('Name must be at least 3 characters!') : setnameErr('');\n        break;\n      case 'email':\n        \n        setemail(user.email);\n        !emailRegEx.test(user.email) ? setemailErr('Invalid Email!') : setemailErr('');\n        break;\n      case 'password':\n        setpassword(user.password);\n       \n        user.password.length < 6 ? setpasswordErr('Password must be at least 6 characters!') : setpasswordErr('');\n        break;\n      case 'confPassword':\n        setconfPassword(user.confPassword);\n        user.confPassword !== password ? setconfPasswordErr('Passwords do not match!') : setconfPasswordErr('');\n        break;\n      default:\n        break;\n    }\n  }\n\n  const handleSignUp = async (e) => {\n    e.preventDefault();\n\n    \n    \n    if (name && email && password && confPassword && !nameErr && !emailErr && !passwordErr && !confPasswordErr) {\n\n             //clear\n          setSignUpErr(\"\")\n          setSuccess(\"\")\n            \n    try {\n      const res = await fetch('/user/signup', { \n            method: 'POST', \n            body: JSON.stringify({ name, email, password }),\n            headers: {'Content-Type': 'application/json',\n                    credentials: 'include'\n            },  \n         \n        \n      });\n      const data = await res.json();\n      // console.log(data);\n\n      if (data.errors) {\n           \n            setSignUpErr(data.errors)\n       \n      }\n      if (data.msg) {\n          // console.log(data);\n          \n          setSuccess(data.msg)\n          \n          \n      \n      }\n\n    }\n    catch (err) {\n      console.log(err.message);\n    }\n\n\n    }\n  }\n  \n  return (\n        <div className=\"container \">\n\n        <div className=\"row mt-5  justify-content-center align-items-center \" >\n\n          <div className=\"col-xs-12 sign-in \" >\n              <h2 className=\"text-center\">Create an Account</h2>\n              {signUpErr && <div className=\"alert alert-danger text-center\">\n                <span className=\"text-danger text-capitalize\">{signUpErr}</span>\n                </div>}\n                          \n              {success && <div className=\"alert alert-success text-center\">\n                <span className=\"text-success text-capitalize\">{success}</span>\n                </div>}\n              <form className=\"mt-4\" onSubmit={handleSignUp}>\n                <div className=\"form-group\">\n                  <label htmlFor=\"name\">Enter Full Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"name\"\n                    className={ nameErr ? \"form-control is-invalid\":\n                          !nameErr && name.length ? \"form-control is-valid\": \"form-control\"\n                      }\n                  \n                    id=\"name\"\n                    placeholder=\"Full Name\"\n                    onChange={(e) => handleChange(e, 'name')}\n                  />\n                  {nameErr && <small className=\"text-danger\">{nameErr}</small>}\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"email\">Enter Email Address</label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    className={ emailErr ? \"form-control is-invalid\":\n                          !emailErr && email.length ? \"form-control is-valid\":\"form-control\"\n                      }\n                    \n                    id=\"email\"\n                    placeholder=\"Email Address\"\n                    onChange={(e) => handleChange(e, 'email')}\n                  />\n                  {emailErr && <small className=\"text-danger\">{emailErr}</small>}\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"password\">Enter Password</label>\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    className={ passwordErr ? \"form-control is-invalid\":\n                          !passwordErr && password.length ? \"form-control is-valid\": \"form-control\"\n                      }\n                \n                    id=\"password\"\n                    placeholder=\"Password\"\n                    onChange={(e) => handleChange(e, 'password')}\n                  />\n                  {passwordErr && <small className=\"text-danger\">{passwordErr}</small>}\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"Confirm Password\">Confirm Password</label>\n                  <input\n                    type=\"password\" \n                    name=\"confPassword\"\n                    className={ confPasswordErr ? \"form-control is-invalid\":\n                            \n                          !confPasswordErr && !passwordErr && confPassword  ? \"form-control is-valid\": \"form-control\"\n                      }\n                \n                    id=\"confPassword\"\n                    placeholder=\"Password\"\n                    onChange={(e) => handleChange(e, 'confPassword')}\n                  />\n                  {confPasswordErr && <small className=\"text-danger\">{confPasswordErr}</small>}\n                </div>\n                <input type=\"submit\" className=\"btn btn-primary\" value=\"Sign Up\"/>\n              </form>\n              <p className=\"float-left\">\n              \n                  Already have an account?<Link to='/signin'>Log In</Link>\n              </p>\n     \n    </div>\n    </div>\n    </div>\n  )\n}\n\nexport default Register\n","import React, { useState, useContext, useEffect } from 'react';\nimport {Link} from 'react-router-dom'\nimport {UserContext} from '../../contexts/user'\nimport * as ROUTES from '../../constants/routes';\n\n\nconst History = () => {\n\n    const { history, setHistory,accessToken, isAdmin } = useContext(UserContext);    //global user\n\n         const [loading, setLoading] = useState(true)\n        const [error, setError] = useState(false)\n\n        useEffect(() => {\n\n            let isActive = false\n\n                    const getHistory = async() =>{\n                        \n                        if(isAdmin){\n\n                                try{\n\n                                    const res = await fetch('/api/payments', {\n                                        headers: {Authorization: accessToken}\n                                    })\n\n                                    const data = await res.json()\n                                    // console.log(data);\n                                    setHistory(data)\n                                    setLoading(false)\n\n                                }catch(err){\n                                    console.log(err.message)\n                                     setHistory([])\n                                    setError(true)\n                                }    \n\n                        } else{\n                                try{\n                                    const res = await fetch('/user/history', {\n                                        headers: {Authorization: accessToken}\n                                    })\n\n                                    const data = await res.json()\n                                    // console.log(data);\n                                    setHistory(data)\n                                    setLoading(false)\n\n                                }catch(err){\n\n                                     console.log(err.message)\n                                     \n                                    setHistory([])\n                                    setError(true)\n                                }\n                        }\n                   \n                }\n\n                getHistory()\n\n                return ()=> isActive = true\n\n        }, [accessToken,setHistory,isAdmin])\n     \n       if(error){\n           return <div>Error with loading of page. Please refresh page.</div>\n       }\n\n\n    return (\n\n        <>\n            {\n                loading && <div>Loading........</div>\n            }\n\n            {\n                error && <div>Error with loading of page. Please refresh page.</div>\n            }\n\n            {history.length > 0 ?\n           <div className=\"container\">\n\n                <div className=\"row \">\n                        \n                     <h2>Account History</h2>         \n         \n                    <button className=\"btn \" ><Link to={ROUTES.PRODUCTS}>Back to products</Link></button>\n\n                </div>\n           \n          \n            <p>You have {history.length} purchases</p>\n            \n            <table className=\"table table-hover \">\n                <thead className=\"thead-dark\">\n                    <tr>\n                        <th scope=\"col\">Payment ID</th>\n                        <th scope=\"col\">Date of Purchased</th>\n                        <th scope=\"col\"></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {\n                      history.map(item => (\n                            <tr key={item._id}>\n                                <td>{item.paymentID}</td>\n                                <td>{new Date(item.createdAt).toLocaleDateString()}</td>\n                                <td><Link to={`/history/${item._id}`}>View</Link></td>\n                            </tr>\n                        )) \n                    }\n                </tbody>\n            </table>\n            \n        </div> \n        :<p>You have 0 purchases</p>\n        }\n       </> \n    )\n}\n\nexport default History\n","import React, {useState, useEffect, useContext} from 'react'\nimport {useParams,Link} from 'react-router-dom'\nimport {UserContext} from '../../contexts/user'\nimport * as ROUTES from '../../constants/routes'\n\nfunction OrderDetails() {\n   \n\n    const { history, } = useContext(UserContext);    //global user    \n    \n    const [orderDetails, setOrderDetails] = useState([])\n\n    const {id} = useParams()\n    // console.log(id);\n\n    useEffect(() => {\n        if(id){\n            history.forEach(item =>{\n                if(item._id === id){\n                    setOrderDetails(item)\n                } \n            })\n        }\n    },[id, history])\n\n\n    if(orderDetails.length === 0) return null;\n\n    return (\n\n        \n        <div className=\"container mt-1\">\n\n            <button className=\"btn\" ><Link to={ROUTES.HISTORY}>Back to accounts</Link></button>\n\n            <table className=\"table table-bordered mt-3\">\n                <thead className=\"thead-dark\">\n                    <tr>\n                        <th>Name</th>\n                        <th>Address</th>\n                        <th>Postal Code</th>\n                        <th>Country Code</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td>{orderDetails.address.recipient_name}</td>\n                        <td>{orderDetails.address.line1 + \" - \" + orderDetails.address.city}</td>\n                        <td>{orderDetails.address.postal_code}</td>\n                        <td>{orderDetails.address.country_code}</td>\n                    </tr>\n                </tbody>\n            </table>\n\n            <table className=\"table table-bordered\" >\n                <thead className=\"thead-dark\">\n                    <tr>\n                        \n                        <th>Products</th>\n                        <th>Quantity</th>\n                        <th>Price</th>\n                        <th>Total</th>\n                        <th>Dispatched</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {\n                        orderDetails.cart.map(item =>(\n                        <tr key={item._id}>\n                            <td>{item.title}</td>\n                            <td>{item.count}</td>\n                            <td>{item.price}</td>\n                            <td>£ {item.price * item.count}</td>\n                            <td>{item.Sent ? \"Yes\": \"No\"}</td>\n                           \n                        </tr>\n                        ))\n                    }\n                    \n                </tbody>\n            </table>\n            \n        </div>\n    )\n}\n\nexport default OrderDetails\n","import React, { useState, useContext, useEffect } from 'react';\r\n\r\nimport {useParams}from 'react-router-dom'\r\n\r\nconst ActivateAccount = () => {\r\n\r\n    const [err, setErr] = useState('')\r\n    const [success, setSuccess] = useState('')\r\n\r\n    // /activation\r\n    const {id} = useParams()\r\n    console.log(id);\r\n\r\n    const validate = async (id)=>{\r\n       \r\n\r\n                try {\r\n\r\n                    const res = await fetch('/user/activation', { \r\n                    method: 'POST', \r\n                    body: JSON.stringify({accesstoken: id}),\r\n                    headers: {'Content-Type': 'application/json', credentials: 'include' }\r\n                    });\r\n\r\n                    const data = await res.json();                \r\n                    console.log(data);\r\n                   \r\n\r\n                    if(data.errors){\r\n                            setErr(data.errors)\r\n\r\n                    } else{\r\n\r\n                         setSuccess(data.msg)\r\n                    }\r\n\r\n        \r\n                 } catch (err) {\r\n                        console.log(err.message);\r\n                        setErr(err.message)\r\n                 }\r\n\r\n    \r\n  }\r\n\r\n    \r\n\r\n    useEffect(() => {\r\n        let isActive = true\r\n            validate(id)\r\n\r\n        return ()=> isActive= false\r\n    }, [id])\r\n\r\n\r\n    return (\r\n        <div className=\"alert\">\r\n          <p className=\"text-danger\">{err}</p>\r\n          <p className=\"text-success\">{success}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ActivateAccount\r\n","import React, { useState, useContext } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport {UserContext} from '../../contexts/user'\r\n\r\n\r\n\r\nconst ResetAccount = () => {\r\n\r\n    const {setAccessToken} = useContext(UserContext);    //global user\r\n    //   const history = useHistory()    \r\n\r\n    const [signInErr, setSignInErr] = useState(\"\")\r\n    const [success, setSuccess] = useState('')\r\n\r\n    const [email, setemail] = useState('');\r\n    const [emailErr, setemailErr] = useState('');\r\n    \r\n\r\n   \r\n\r\n    const handleChange = (e, name) => {\r\n\r\n        //clear\r\n      setSignInErr(\"\")\r\n      setSuccess(\"\")\r\n      setemailErr(\"\")\r\n\r\n    const user = {};\r\n    const emailRegEx = RegExp(\r\n      /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n    );\r\n    user[name] = e.target.value;\r\n    // validations\r\n    switch (name) {\r\n      case 'email':\r\n        setemail(user.email);\r\n        !emailRegEx.test(user.email) ? setemailErr('Invalid Email!') : setemailErr('');\r\n        break;\r\n  \r\n    }\r\n  }\r\n\r\n  const handleSignIn = async (e) => {\r\n    e.preventDefault();\r\n    if (email && !emailErr) {\r\n\r\n          //clear         \r\n          setSignInErr(\"\")\r\n          setSuccess(\"\")\r\n      \r\n\r\n        \r\n    try {\r\n      const res = await fetch('/user/forgot', { \r\n        method: 'POST', \r\n        body: JSON.stringify({ email }),\r\n        headers: {'Content-Type': 'application/json',\r\n                credentials: 'include'\r\n                }\r\n           \r\n      });\r\n      const data = await res.json();\r\n      // console.log(data);\r\n\r\n      if (data.errors) {            \r\n            setSignInErr(data.errors)\r\n           \r\n            \r\n      } else{\r\n\r\n        setSuccess(data.msg)\r\n      }\r\n    \r\n\r\n    }\r\n    catch (err) {\r\n      console.log(err);\r\n      setSignInErr(err.message)\r\n    }\r\n\r\n    }\r\n  }\r\n\r\n  return (\r\n   \r\n    <div className=\"container \">\r\n\r\n        <div className=\"row mt-5  justify-content-center align-items-center  \" >\r\n\r\n          <div className=\"col-xs-12  sign-in\" >\r\n\r\n                    <h2 className=\"text-start mt-3\">Forgot Password</h2>\r\n                    {signInErr && <div className=\"alert alert-danger text-center\">\r\n                      <span className=\"text-danger text-capitalize\">{signInErr}</span>\r\n                    </div>}\r\n                    {success && <div className=\"alert alert-success text-center\">\r\n                      <span className=\"text-success text-capitalize\">{success}</span>\r\n                    </div>}\r\n\r\n                    <form className=\"mt-4 \" onSubmit={handleSignIn}>\r\n                      <div className=\"form-group\">\r\n                            <label className=\"mr-3\" htmlFor=\"email\">Enter Email Address</label>\r\n                            <input\r\n                              type=\"email\"\r\n                              name=\"email\"\r\n                              className={ emailErr ? \"form-control is-invalid\":\r\n                                    !emailErr && email.length ? \"form-control is-valid\":\"form-control\"\r\n                                }\r\n                          \r\n                              id=\"email\"\r\n                              placeholder=\"Email Address\"\r\n                              required\r\n                              autoComplete=\"on\"\r\n                              onChange={(e) => handleChange(e, 'email')}\r\n                            />\r\n                            {emailErr && <small className=\"text-danger\">{emailErr}</small>}\r\n                      </div>\r\n\r\n                      \r\n                      <input type=\"submit\" className=\"btn btn-primary\" value=\"Submit\" />\r\n                    </form>\r\n                    <p className=\"float-left mt-5\">    \r\n                          Back to<Link to='/signin'>Sign in</Link>\r\n                    </p>\r\n\r\n                    \r\n\r\n                </div>    \r\n\r\n        </div>\r\n  \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ResetAccount\r\n","import React, { useState, useContext } from 'react';\r\nimport { Link, useHistory, useParams } from 'react-router-dom';\r\n\r\nimport { UserContext } from '../../contexts/user';\r\n\r\nconst ResetPassword = () => {\r\n\tconst history = useHistory();\r\n\tconst { id } = useParams();\r\n\r\n\tconst { setAccessToken } = useContext(UserContext); //global user\r\n\r\n\tconst [signUpErr, setSignUpErr] = useState('');\r\n\r\n\tconst [email, setemail] = useState('');\r\n\tconst [password, setpassword] = useState('');\r\n\tconst [confPassword, setconfPassword] = useState('');\r\n\tconst [emailErr, setemailErr] = useState('');\r\n\tconst [passwordErr, setpasswordErr] = useState('');\r\n\tconst [confPasswordErr, setconfPasswordErr] = useState('');\r\n\tconst [success, setSuccess] = useState('');\r\n\tconst handleChange = (e, name) => {\r\n\t\t//clear\r\n\t\tsetSignUpErr('');\r\n\r\n\t\tconst user = {};\r\n\t\tconst emailRegEx = RegExp(\r\n\t\t\t/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n\t\t);\r\n\t\tuser[name] = e.target.value;\r\n\t\t// validations\r\n\t\tswitch (name) {\r\n\t\t\tcase 'email':\r\n\t\t\t\tsetemail(user.email);\r\n\t\t\t\t!emailRegEx.test(user.email)\r\n\t\t\t\t\t? setemailErr('Invalid Email!')\r\n\t\t\t\t\t: setemailErr('');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'password':\r\n\t\t\t\tsetpassword(user.password);\r\n\r\n\t\t\t\tuser.password.length < 6\r\n\t\t\t\t\t? setpasswordErr('Password must be at least 6 characters!')\r\n\t\t\t\t\t: setpasswordErr('');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'confPassword':\r\n\t\t\t\tsetconfPassword(user.confPassword);\r\n\t\t\t\tuser.confPassword !== password\r\n\t\t\t\t\t? setconfPasswordErr('Passwords do not match!')\r\n\t\t\t\t\t: setconfPasswordErr('');\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSignUp = async (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tif (\r\n\t\t\temail &&\r\n\t\t\tpassword &&\r\n\t\t\tconfPassword &&\r\n\t\t\t!emailErr &&\r\n\t\t\t!passwordErr &&\r\n\t\t\t!confPasswordErr\r\n\t\t) {\r\n\t\t\t//clear\r\n\t\t\tsetSignUpErr('');\r\n\t\t\tsetSuccess('');\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await fetch('/user/reset', {\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tbody: JSON.stringify({ email, password, accesstoken: id }),\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tconst data = await res.json();\r\n\t\t\t\tconsole.log(data);\r\n\r\n\t\t\t\tif (data.errors) {\r\n\t\t\t\t\tsetSignUpErr(data.errors);\r\n\t\t\t\t}\r\n\t\t\t\tif (data.msg) {\r\n\t\t\t\t\tconsole.log(data);\r\n\r\n\t\t\t\t\tsetSuccess(data.msg);\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err.message);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='container '>\r\n\t\t\t<div className='row mt-5  justify-content-center align-items-center '>\r\n\t\t\t\t<div className='col-xs-12 sign-in '>\r\n\t\t\t\t\t<h2 className='text-center'>Create your Password</h2>\r\n\t\t\t\t\t{signUpErr && (\r\n\t\t\t\t\t\t<div className='alert alert-danger text-center'>\r\n\t\t\t\t\t\t\t<span className='text-danger text-capitalize'>{signUpErr}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{success && (\r\n\t\t\t\t\t\t<div className='alert alert-success text-center'>\r\n\t\t\t\t\t\t\t<span className='text-success text-capitalize'>{success}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<form className='mt-4' onSubmit={handleSignUp}>\r\n\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t<label htmlFor='email'>Enter Email Address</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\temailErr\r\n\t\t\t\t\t\t\t\t\t\t? 'form-control is-invalid'\r\n\t\t\t\t\t\t\t\t\t\t: !emailErr && email.length\r\n\t\t\t\t\t\t\t\t\t\t? 'form-control is-valid'\r\n\t\t\t\t\t\t\t\t\t\t: 'form-control'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tid='email'\r\n\t\t\t\t\t\t\t\tplaceholder='Email Address'\r\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e, 'email')}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{emailErr && <small className='text-danger'>{emailErr}</small>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t<label htmlFor='password'>Enter Password</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\tname='password'\r\n\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\tpasswordErr\r\n\t\t\t\t\t\t\t\t\t\t? 'form-control is-invalid'\r\n\t\t\t\t\t\t\t\t\t\t: !passwordErr && password.length\r\n\t\t\t\t\t\t\t\t\t\t? 'form-control is-valid'\r\n\t\t\t\t\t\t\t\t\t\t: 'form-control'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tid='password'\r\n\t\t\t\t\t\t\t\tplaceholder='Password'\r\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e, 'password')}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{passwordErr && (\r\n\t\t\t\t\t\t\t\t<small className='text-danger'>{passwordErr}</small>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='form-group'>\r\n\t\t\t\t\t\t\t<label htmlFor='Confirm Password'>Confirm Password</label>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\tname='confPassword'\r\n\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\tconfPasswordErr\r\n\t\t\t\t\t\t\t\t\t\t? 'form-control is-invalid'\r\n\t\t\t\t\t\t\t\t\t\t: !confPasswordErr && !passwordErr && confPassword\r\n\t\t\t\t\t\t\t\t\t\t? 'form-control is-valid'\r\n\t\t\t\t\t\t\t\t\t\t: 'form-control'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tid='confPassword'\r\n\t\t\t\t\t\t\t\tplaceholder='Password'\r\n\t\t\t\t\t\t\t\tonChange={(e) => handleChange(e, 'confPassword')}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{confPasswordErr && (\r\n\t\t\t\t\t\t\t\t<small className='text-danger'>{confPasswordErr}</small>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type='submit' className='btn btn-primary' value='Submit' />\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<p className='float-left mt-5'>\r\n\t\t\t\t\t\t<Link to='/signin'>Log In</Link>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ResetPassword;\r\n","import React, {useState, useContext, useEffect} from 'react'\n\nimport {UserContext} from '../../contexts/user'\nimport {ShoppingContext} from '../../contexts/shopping'\n\nconst initialState = {\n   \n    title: \"\",\n    image: \"\",\n    price: \"\",\n    description: \"\",\n    category: \"\",\n    countInStock: \"\",\n    \n}\n\nfunction CreateProduct() {\n\n    const {isAdmin,accessToken} = useContext(UserContext);    //global user\n    const {categorysGlobal, setCategorysGlobal } = useContext(ShoppingContext) // global products   \n    \n    const [product, setProduct] = useState(initialState)\n    \n    \n\n     const [loading, setLoading] = useState(true)\n    const [error, setError] = useState(false)\n    \n    const getCategorys = async () =>{\n\n            try{\n\n                const res = await fetch('/api/category')\n                const data = await res.json() \n                                \n                setCategorysGlobal(data)\n                setLoading(false)\n            }\n\n            catch(err){\n                console.log(err.message);\n                setLoading(false)\n                setError(true)\n            }\n\n        }\n\n\n        useEffect(() => {\n\n            let isActive= true\n            \n                getCategorys()           \n            \n            return ()=>{isActive=false}\n        }, [])\n        \n    \n    const handleChangeInput = e =>{\n\n        const {name, value} = e.target\n    \n        if((name === \"price\" || name === \"countInStock\") && value <0){\n            return\n        }\n\n        setProduct({...product, [name]: value})     \n\n\n    }\n\n    const handleSubmit = async e =>{\n        e.preventDefault()\n        try {\n            if(!isAdmin) return alert(\"Unauthorised\")\n\n            if(product.category === \"\"){\n                alert(\"Please select a category\")\n                return\n\n            }\n            \n                // console.log(product);\n\n           const res = await fetch('/api/products/add', { \n                method: 'POST', \n                body: JSON.stringify({ ...product }),\n                headers: {'Content-Type': 'application/json',\n                        credentials: 'include',\n                        Authorization: accessToken\n                        \n                        }\n           \n                });\n\n            \n            const data = await res.json()\n            console.log(data);\n            if(data !== \"item added\"){\n                \n                alert(\"Admin access lasts 10 mins, please refresh page and try again.\")\n\n            }else{\n                alert(data)\n                setProduct(initialState)\n            }\n            \n        } catch (err) {\n            alert(err.message)\n        }\n    }\n           \n    \n    return (\n               <>\n             {\n                loading && <div>Loading........</div>\n            }\n\n            {\n                error && <div>Error with loading of page. Please refresh page.</div>\n            }\n        \n            {categorysGlobal &&\n\n            \n            <form onSubmit={handleSubmit}>                \n\n                <div className=\"form-group\">\n                    <label >Title</label>\n                    <input type=\"text\" name=\"title\" className=\"form-control\" required\n                    placeholder=\"Shirt\"\n                    value={product.title} onChange={handleChangeInput} />\n                </div>\n\n                <div className=\"form-group\">\n                    <label >Image</label>\n                    <input type=\"text\" name=\"image\" className=\"form-control\" required\n                    placeholder=\"https://images.unsplash.com/photo-1606813907291-d86efa9b94db?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1352&q=80\"\n                    value={product.image} onChange={handleChangeInput} />\n                </div>\n\n                <div className=\"form-group\">\n                    <label >Price</label>\n                    <input type=\"number\" name=\"price\" className=\"form-control\" required\n                    placeholder=\"1.00\"\n                    value={product.price} onChange={handleChangeInput} />\n                </div>\n\n                <div className=\"form-group\">\n                    <label >Description</label>\n                    <textarea type=\"text\" name=\"description\" className=\"form-control\" required\n                    placeholder=\"Lorem ipsum dolor sit amet consectetur adipisicing elit. Non assumenda maiores vero, consequuntur\"\n                    value={product.description} rows=\"5\" onChange={handleChangeInput} />\n                </div>\n\n               \n\n                <div className=\"form-group\">\n                    <label >Categories: </label>\n                    <select name=\"category\" value={product.category}  className=\"form-control\" onChange={handleChangeInput} >\n                        <option value=\"\">Please select a category</option>\n                        {\n                            categorysGlobal.map(category => (\n                                <option value={category.name} key={category._id}>\n                                    {category.name}\n                                </option>\n                            ))\n                        }\n                    </select>\n                </div>\n\n\n                <div className=\"form-group\">\n                    <label >Stock Count</label>\n                    <input type=\"number\" name=\"countInStock\" className=\"form-control\" required\n                    placeholder=\"0\"\n                    value={product.countInStock} onChange={handleChangeInput} />\n                </div>        \n                \n\n                <button className=\"btn btn-primary\" type=\"submit\">Add</button>\n            </form>\n\n           }\n       </>\n    )\n}\n\nexport default CreateProduct\n","import React, {useState, useEffect, useContext} from 'react'\nimport * as ROUTES from '../../constants/routes';\n\nimport {UserContext} from '../../contexts/user'\nimport {ShoppingContext} from '../../contexts/shopping'\nimport { useParams, Link } from 'react-router-dom';\n\nfunction AmendProduct() {\n\n    const {id} = useParams()    \n\n    const {isAdmin,accessToken} = useContext(UserContext);    //global user\n    const {categorysGlobal,  products } = useContext(ShoppingContext) // global products   \n    \n    const [product, setProduct] = useState()\n    const [loading, setLoading] = useState(true)\n    const [error, setError] = useState(false)\n\n    useEffect(() => {\n        let isActive = false\n            try{\n         const getProduct = () =>{\n            let amendProduct = products.filter(x => x._id === id)\n            return amendProduct\n        }\n        \n        let item = getProduct()\n        // console.log(amendProduct);\n        setProduct(item[0])\n        setLoading(false)\n         }catch(err){\n            console.log(err.message)\n            setError(true)\n\n         }\n\n        return ()=> isActive = true\n\n    }, [])\n    \n        \n    const handleChangeInput = e =>{\n        // console.log(\"HERE\");\n\n        const {name, value} = e.target\n        console.log(name,value);\n    \n        if((name === \"price\" || name === \"countInStock\") && value <0){\n            return\n        }\n\n        setProduct({...product, [name]: value})     \n\n\n    }\n\n    const handleSubmit = async e =>{\n        e.preventDefault()\n        try {\n            if(!isAdmin) return alert(\"Unauthorised\")\n\n            if(product.category === \"\"){\n                alert(\"Please select a category\")\n                return\n\n            }\n            \n            console.log(product);\n\n           const res = await fetch('/api/products/update/' + id, { \n                method: 'POST', \n                body: JSON.stringify({ ...product }),\n                headers: {'Content-Type': 'application/json',\n                        credentials: 'include',\n                        Authorization: accessToken\n                        \n                        }\n           \n                });\n\n            \n            const data = await res.json()\n            console.log(data);\n            if(data !== \"item updated\"){\n                \n                alert(\"Admin access lasts 10 mins, please refresh page and try again.\")\n\n            }else{\n                alert(data)\n                \n            }\n            \n        } catch (err) {\n            alert(err.message)\n        }\n    }\n           \n    \n    return (\n               <>\n             {\n                loading && <div>Loading........</div>\n            }\n\n            {\n                error && <div>Error with loading of page. Please refresh page.</div>\n            }\n            \n            {product &&\n\n            \n            <form onSubmit={handleSubmit}>                \n\n                <div className=\"form-group\">\n                    <label >Title</label>\n                    <input type=\"text\" name=\"title\" className=\"form-control\" required\n                       \n                       value={product.title} onChange={handleChangeInput} />\n                </div>\n\n                <div className=\"form-group\">\n                    <label >Image</label>\n                    <input type=\"text\" name=\"image\" className=\"form-control\" required\n                     value={product.image} onChange={handleChangeInput} />\n                </div>\n\n                <div className=\"form-group\">\n                    <label >Price</label>\n                    <input type=\"number\" name=\"price\" className=\"form-control\" required\n                          value={product.price} onChange={handleChangeInput} />\n                </div>\n\n                <div className=\"form-group\">\n                    <label >Description</label>\n                    <textarea type=\"text\" name=\"description\" className=\"form-control\" required\n                      value={product.description} rows=\"5\" onChange={handleChangeInput} />\n                </div>\n\n               \n\n                <div className=\"form-group\">\n                    <label >Categories: </label>\n                    <select name=\"category\" value={product.category}  className=\"form-control\" onChange={handleChangeInput} >\n                        \n                        {\n                            categorysGlobal.map(category => (\n                                <option value={category.name} key={category._id}>\n                                    {category.name}\n                                </option>\n                            ))\n                        }\n                    </select>\n                </div>\n\n\n                <div className=\"form-group\">\n                    <label >Stock Count</label>\n                    <input type=\"number\" name=\"countInStock\" className=\"form-control\" required\n                       value={product.countInStock} onChange={handleChangeInput} />\n                </div>        \n                \n\n                <button className=\"btn btn-primary\" type=\"submit\">Save</button>\n                <button className=\"btn border\" ><Link to={ROUTES.PRODUCTS}>Back to products</Link></button>\n                <div>\n\n                </div>\n                 \n                \n            </form>\n\n           }\n       </>\n    )\n}\n\n\n\nexport default AmendProduct\n","import * as ROUTES from '../constants/routes';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport Home from '../components/Home';\nimport Error from '../components/Error';\nimport Navbar from '../components/Navbar';\n\nimport Products from '../components/products/Products';\nimport ProductDetails from '../components/products/ProductDetails';\n\nimport Cart from '../components/cart/Cart';\n\nimport Login from '../components/accounts/Login';\nimport Register from '../components/accounts/Register';\nimport History from '../components/accounts/History';\nimport OrderDetails from '../components/accounts/orderDetails';\n\n//activate account for first login\nimport ActivateAccount from '../components/accounts/ActivateAccount';\n//request a new password\nimport ResetAccount from '../components/accounts/ResetAccount';\n//request a new password\nimport ResetPassword from '../components/accounts/ResetPassword';\n\n//admin\nimport CreateProduct from '../components/admin/products';\nimport AmendProduct from '../components/admin/amendProducts';\n\nconst Pages = () => {\n\treturn (\n\t\t<>\n\t\t\t<Router>\n\t\t\t\t<Navbar />\n\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route exact path={ROUTES.HOME} component={Home} />\n\n\t\t\t\t\t<Route exact path={ROUTES.PRODUCTS} exact component={Products} />\n\t\t\t\t\t<Route\n\t\t\t\t\t\texact\n\t\t\t\t\t\tpath={ROUTES.PRODUCTS + '/:id'}\n\t\t\t\t\t\tcomponent={ProductDetails}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route path={ROUTES.CART} component={Cart}></Route>\n\n\t\t\t\t\t<Route path={ROUTES.HISTORY} exact component={History} />\n\t\t\t\t\t<Route\n\t\t\t\t\t\texact\n\t\t\t\t\t\tpath={ROUTES.HISTORY + '/:id'}\n\t\t\t\t\t\tcomponent={OrderDetails}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Route path={ROUTES.LOGIN} component={Login} />\n\t\t\t\t\t<Route path={ROUTES.REGISTER} component={Register} />\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath={ROUTES.ACTIVATE + '/:id'}\n\t\t\t\t\t\tcomponent={ActivateAccount}\n\t\t\t\t\t\texact\n\t\t\t\t\t/>\n\t\t\t\t\t<Route path={ROUTES.RESET} component={ResetAccount} exact />\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath={ROUTES.RESETPASSWORD + '/:id'}\n\t\t\t\t\t\tcomponent={ResetPassword}\n\t\t\t\t\t\texact\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Route path={ROUTES.CREATE_PRODUCT} exact component={CreateProduct} />\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath={ROUTES.AMEND_PRODUCT + '/:id'}\n\t\t\t\t\t\tcomponent={AmendProduct}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Route path='*'>\n\t\t\t\t\t\t<Error />\n\t\t\t\t\t</Route>\n\t\t\t\t</Switch>\n\t\t\t</Router>\n\t\t</>\n\t);\n};\n\nexport default Pages;\n","import React, {useEffect, useContext} from 'react'\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport Pages from './pages/Pages';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport {getStorage} from './utils/storage'\nimport {ShoppingContext} from './contexts/shopping'\nimport {UserContext} from './contexts/user'\n\nfunction App() {\n\n  const { setCart  } = useContext(ShoppingContext);    //global shopping cart\n  const {setAccessToken} = useContext(UserContext);    //global user\n\n  \n\n    useEffect(() => {\n      const storage = getStorage()\n      \n       if(storage){\n          setCart(storage)\n       } \n      // console.log(storage);  \n      }, [])\n\n      useEffect(() =>{\n\n        const firstLogin = localStorage.getItem('firstLogin')\n        \n        if(firstLogin){\n\n            const refreshToken = async () =>{\n                           \n                const res = await fetch('/user/refresh_token',{\n                    credentials: 'include' })    \n                        \n                const data = await res.json()\n                \n                //get a new acccess token if cookie held\n                  if(data.accesstoken){\n                    setAccessToken(data.accesstoken)\n                  }\n                \n                 }\n\n\n            refreshToken()\n        }\n        },[])\n\n       \n\n  return (\n    <div className=\"container\">\n        <Router>           \n           <Pages />\n        </Router>            \n      \n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport ShoppingProvider from './contexts/shopping'\nimport UserProvider from './contexts/user';\n\nReactDOM.render(\n  <React.StrictMode>\n\n          <UserProvider>\n              <ShoppingProvider>\n                    <App />\n              </ShoppingProvider>\n         </UserProvider>\n\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}